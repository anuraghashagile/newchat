# TalkWithStrangers - Production Ready (Supabase Edition)

A fully functional, anonymous 1-on-1 chat application.

## üåü Architecture

This version uses **Supabase** (PostgreSQL) as a high-speed matchmaking queue and **WebRTC (PeerJS)** for direct peer-to-peer messaging.

1. **User Joins**: Checks Supabase DB for waiting users.
2. **Match Found**: Instantly deletes the waiting user from DB and connects via PeerJS.
3. **Queue Empty**: Adds self to Supabase DB and waits.

This guarantees 100% connection rates unlike random mesh networks.

## ‚ö°Ô∏è Quick Setup (REQUIRED)

Since this app uses a database, you must set it up.

### 1. Create Supabase Project
1. Go to [Supabase.com](https://supabase.com) and create a free project.
2. Go to **Project Settings -> API**.
3. Copy the **URL** and **anon / public** Key.

### 2. Create the Queue Table
Go to the **SQL Editor** in your Supabase dashboard and run this command:

```sql
create table waiting_queue (
  id bigint generated by default as identity primary key,
  peer_id text not null,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Turn off Realtime for this table (saves resources, we poll/fetch once)
alter publication supabase_realtime drop table waiting_queue;
```

### 3. Deploy to Vercel
1. Import this repo to Vercel.
2. Add the Environment Variables:
   - `VITE_SUPABASE_URL`: Your Supabase URL
   - `VITE_SUPABASE_ANON_KEY`: Your Supabase Anon Key
   - `API_KEY`: Google Gemini API Key (Optional, for AI mode)

3. Deploy!

## üõ†Ô∏è Local Development

1. Create a `.env` file in the root:
```
VITE_SUPABASE_URL=your_url_here
VITE_SUPABASE_ANON_KEY=your_key_here
```

2. Install & Run:
```bash
npm install
npm run dev
```

## ‚ú® Features

- **Guaranteed Matching**: No endless loading screens.
- **P2P Privacy**: Messages go directly between users, not the server.
- **Vanish Mode**: Messages disappear on disconnect.
- **Typing Indicators**: Real-time feedback.
